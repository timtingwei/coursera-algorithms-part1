# coursera-algorithms-part1

## 1 基础

### 1.4 算法分析(简略学习, 实现1.5 union-find再回来看)

#### 1.4.9 内存
	
分析内存: 只需要将变量的数量和他们的类型所对应的字节数,分别相乘并汇总。

Java int数据类型在 -2147483648 ~ 2147483647 之间, 2^32, 即用32位表示int值

Java用8位表示字节，在这个前提下，
|类型           |字节      | 位      |
|---------------|---------|---------|
|boolean        |1        |         |
|byte           |1        |         |
|char           |2        |         |
|int            |4        | 32      |
|float          |4        |         |
|long           |8        |         |
|double         |8        |         |

`64位架构下, 表示机器地址需要8字节, 32位只用4字节`

##### 1.4.9.1 对象

包括: 对象的类的引用, 垃圾收集信息以及同步信息。

<span style="color:red">对象开销 + 对象的引用 + 原始实例变量 + 填充字节</span>

> * 对象开销: 16 byte
> * 对象引用: 一般都是内存地址, 因此 8 type
> * 实例变量: int 需要 4 byte, n个int, 4*n
> * 填充字节: 4个填充字节

分析几个案例:

```sh
Integer对象:
16 + 4 + 4 = 24
对象开销16字节 + 1个int实例变量, 4个填充字节
```

```sh
一个Date对象:
16 + 3 * 4 + 4 = 32
对象开销 16byte + 3个int实例变量各4 byte + 4个填充字节
```

```sh
Counter对象:
16 + 8 + 4 + 4 = 32
16对象开销 + 8对象引用 + 1个int变量 + 4个填充字节
```



##### 1.4.9.2 链表

嵌套的非静态类, 还需要额外的8个字节(用于一个指向外部类的引用)

`Node类的内存:`
Node类(16 + 8 * 2 + 8 = 40) + Integer(16 + 4 + 4 = 24)

<span style="color">为什么Node类没有填充字节呢?</span>

```sh
整个元素个数N, 用链表实现的Stack的内存:
16 + 8 + 4 + 4 = 32;
32 + 64N;
```

##### 1.4.9.3 数组

一个原始数据类型的数组, 24 byte(16 + 4 + 4 = 24) + 保存值所需的内存.

```
含N个int值的数组, 24 + 4N 
```

数组内存理解到这。

##### 1.4.8.4 字符串

一个String: 16 + 8 + 12 + 4 = 40 byte 
String的实现含有4个实例变量： 一个指向字符数组的引用(8字节) 和三个int值(各4)

第1个int值: 字符数组中的偏移量
第2个int值: 一个计数器(字符串长度)
第3个int值: 散列值(可以在某些情况下, 忽略一些计算)

对象所表示的字符串由
```java
value[offset] 到 value[offset + count - 1]中的字符组成
```

String的char数组常常是在多个字符串之间共享, 因为String对象是不可变的, 这个设计的实现在能够多个对象含有相同value[]数组时, 共享.

##### 1.4.9.5 字符串的值和字符串

一个长度为N的String对象, 一般需要 40（String对象本身） + (24 + 2N) 字符数组, 总共(64 + 2N)字节

基础字符串处理算法的效率关键:
<span style="corlor:red">一个子字符串所需的额外内存是一个常数, 构造一个子字符串所需的时间也是常数. </span>

#### 1.4.10 展望

常见的两种错误:
> * 过于关注程序的性能
> * 完全忽略了程序的性能

1, 首要任务应该是写出清晰正确的代码。
2, 几行优秀的代码比起来, 比暴力的算法算法处理大规模问题时收益更大, 

如果你在发开一个程序的全过程中, 都能关注它的运行成本, 就能从该程序的每次执行中收益.

